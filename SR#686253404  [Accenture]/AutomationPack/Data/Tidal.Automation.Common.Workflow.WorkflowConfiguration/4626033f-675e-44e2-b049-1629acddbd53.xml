<?xml version="1.0"?>
<WorkflowConfiguration xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xml:space="preserve">
  <Id>4626033f-675e-44e2-b049-1629acddbd53</Id>
  <DisplayName>Monitor for Missing Schedule Trigger</DisplayName>
  <VersionNumber>18</VersionNumber>
  <CreatedTime>2019-04-12T17:54:49.2599114Z</CreatedTime>
  <ModifiedTime>2019-04-15T15:02:05.3169644Z</ModifiedTime>
  <FirstActivity xsi:type="RootNode">
    <Id>8903d456-9ef3-4ce5-a104-4a426008f37d</Id>
    <DisplayName />
    <Children>
      <ActivityNode xsi:type="LockNode">
        <Id>f9b14587-7115-4786-a43a-6a1d47b5fe53</Id>
        <DisplayName>Queue Block</DisplayName>
        <Children>
          <ActivityNode xsi:type="ExecuteActivityNode">
            <Id>71d6d20b-bcb7-4bd9-8844-bdd5c1dada03</Id>
            <DisplayName>Select from Table</DisplayName>
            <Children>
              <ActivityNode xsi:type="FailedBranchPlaceholderNode">
                <Id>fea56ef8-2b8c-4ea8-a429-bbac3e2ffb45</Id>
                <ActivityNodeId>71d6d20b-bcb7-4bd9-8844-bdd5c1dada03</ActivityNodeId>
                <CompletedId>ff4b7057-7f24-4c98-8e5a-797f7ceedb28</CompletedId>
              </ActivityNode>
            </Children>
            <Configuration xsi:type="ExtractTableActivityConfiguration" xml:space="preserve">
              <Id>71d6d20b-bcb7-4bd9-8844-bdd5c1dada03</Id>
              <DisplayName>Select from Table</DisplayName>
              <TargetLoadBalancer xsi:type="SingleTargetLoadBalancer">
                <SingleTargetId>
                  <HardcodedValue>bd4b3145-4e20-42bb-ba8f-34c013ca86cc</HardcodedValue>
                </SingleTargetId>
              </TargetLoadBalancer>
              <InheritTarget>false</InheritTarget>
              <ContainingProcessId>cf17b317-9d18-40c1-8ef0-37164b7ea3e9</ContainingProcessId>
              <Columns>
                <BuiltinTableColumn>
                  <Name>Process Name</Name>
                  <DataType>System.String</DataType>
                </BuiltinTableColumn>
                <BuiltinTableColumn>
                  <Name>Schedule Interval (Minutes)</Name>
                  <DataType>System.Int32</DataType>
                </BuiltinTableColumn>
                <BuiltinTableColumn>
                  <Name>Last Triggered</Name>
                  <DataType>Tidal.Automation.Common.Product.UtcDateTime</DataType>
                </BuiltinTableColumn>
              </Columns>
              <SourceTable xsi:type="PropertyReference">
                <DisplayPath>Global Variables.Scheduled Process Monitor Information</DisplayPath>
                <LinkChain />
                <ObjectId>c0d7a062-dd6b-480e-b095-c06467881883</ObjectId>
                <ObjectType>GlobalVariable</ObjectType>
              </SourceTable>
              <WhereClause>
                <FormattedCode>[Process Name] = '{0}'</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <DisplayPath>Process.Triggers.Process Started.Triggering Process.Name</DisplayPath>
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ProcessInstance</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedProcessName</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectType>EventInstance</ObjectType>
                  </VariableReference>
                </References>
              </WhereClause>
              <SortColumn />
              <SortOrder>Ascending</SortOrder>
              <MaxRows>
                <HardcodedValue>2147483647</HardcodedValue>
              </MaxRows>
            </Configuration>
          </ActivityNode>
          <ActivityNode xsi:type="ConditionBranchNode">
            <Id>db2245ea-6d47-439e-b388-2e90044ab2df</Id>
            <DisplayName>Not Monitor?</DisplayName>
            <Children>
              <ActivityNode xsi:type="CompletedNode">
                <Id>59db2f99-8756-48f3-98af-1179a0f7d7d2</Id>
                <CompletedType>Succeeded</CompletedType>
              </ActivityNode>
            </Children>
            <Condition>
              <Id>5ca545c5-4477-4891-90f0-a89e75f83eac</Id>
              <Conditions>
                <ConditionDefinition xsi:type="VariableConditionDefinition">
                  <Id>e9f2aff6-a036-473a-bf03-80ef9d366c68</Id>
                  <Expression xsi:type="SubstitutableNumber">
                    <HardcodedValue>0</HardcodedValue>
                  </Expression>
                  <Comparison>Equals</Comparison>
                  <VariableReference xsi:type="PropertyReference">
                    <DisplayPath>Workflow.Select from Table.Result Table.Row Count</DisplayPath>
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResultTable</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>RowCount</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>71d6d20b-bcb7-4bd9-8844-bdd5c1dada03</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </ConditionDefinition>
              </Conditions>
            </Condition>
          </ActivityNode>
          <ActivityNode xsi:type="ExecuteActivityNode">
            <Id>f05b7175-b141-41b3-8944-a1e803494a48</Id>
            <DisplayName>Calculate Date Time Difference</DisplayName>
            <Children>
              <ActivityNode xsi:type="ConditionBranchNode">
                <Id>3839e5c3-1deb-40c3-af74-bad56645163d</Id>
                <Notes>If this execution fails, execute the contained workflow nodes.</Notes>
                <DisplayName>If Execution Fails</DisplayName>
                <Children>
                  <ActivityNode xsi:type="CompletedNode">
                    <Id>7e59ee90-be68-48b8-abf3-418df29b76b3</Id>
                    <Notes>Fail the entire process</Notes>
                    <CompletedType>FailedNotCompleted</CompletedType>
                    <ResultMessage>
                      <FormattedCode>{0}</FormattedCode>
                      <References>
                        <VariableReference xsi:type="PropertyReference">
                          <DisplayPath>Workflow.Calculate Date Time Difference.Error Information</DisplayPath>
                          <LinkChain>
                            <Link xsi:type="PropertyNameLink">
                              <PropertyName>ErrorInformation</PropertyName>
                            </Link>
                          </LinkChain>
                          <ObjectId>f05b7175-b141-41b3-8944-a1e803494a48</ObjectId>
                          <ObjectType>ActivityInstance</ObjectType>
                        </VariableReference>
                      </References>
                    </ResultMessage>
                  </ActivityNode>
                </Children>
                <Condition>
                  <Id>cb1527a6-5f2f-45f4-9014-77d6bee4a091</Id>
                  <Conditions>
                    <ConditionDefinition xsi:type="VariableConditionDefinition">
                      <Id>f16517b8-f090-4bcd-b0b8-2f2be24d0025</Id>
                      <Expression xsi:type="SubstitutableBoolean">
                        <HardcodedValue>true</HardcodedValue>
                      </Expression>
                      <Comparison>Equals</Comparison>
                      <VariableReference xsi:type="PropertyReference">
                        <DisplayPath>Workflow.Calculate Date Time Difference.Instance Failed</DisplayPath>
                        <LinkChain>
                          <Link xsi:type="PropertyNameLink">
                            <PropertyName>InstanceFailed</PropertyName>
                          </Link>
                        </LinkChain>
                        <ObjectId>f05b7175-b141-41b3-8944-a1e803494a48</ObjectId>
                        <ObjectType>ActivityInstance</ObjectType>
                      </VariableReference>
                    </ConditionDefinition>
                    <ConditionDefinition xsi:type="VariableConditionDefinition">
                      <Id>08d625ae-b99f-46ea-bcca-132aa6050a5e</Id>
                      <Expression xsi:type="SubstitutableWildcard">
                        <HardcodedValue>Unable to fully resolve expression*</HardcodedValue>
                      </Expression>
                      <Comparison>NotMatchingWildcard</Comparison>
                      <VariableReference xsi:type="PropertyReference">
                        <DisplayPath>Workflow.Calculate Date Time Difference.Error Information</DisplayPath>
                        <LinkChain>
                          <Link xsi:type="PropertyNameLink">
                            <PropertyName>ErrorInformation</PropertyName>
                          </Link>
                        </LinkChain>
                        <ObjectId>f05b7175-b141-41b3-8944-a1e803494a48</ObjectId>
                        <ObjectType>ActivityInstance</ObjectType>
                      </VariableReference>
                    </ConditionDefinition>
                  </Conditions>
                </Condition>
              </ActivityNode>
            </Children>
            <Configuration xsi:type="DiffDateTimeActivityConfiguration" xml:space="preserve">
              <Id>f05b7175-b141-41b3-8944-a1e803494a48</Id>
              <DisplayName>Calculate Date Time Difference</DisplayName>
              <TargetLoadBalancer xsi:type="SingleTargetLoadBalancer">
                <SingleTargetId>
                  <HardcodedValue>bd4b3145-4e20-42bb-ba8f-34c013ca86cc</HardcodedValue>
                </SingleTargetId>
              </TargetLoadBalancer>
              <InheritTarget>false</InheritTarget>
              <ContainingProcessId>cf17b317-9d18-40c1-8ef0-37164b7ea3e9</ContainingProcessId>
              <Date>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <DisplayPath>Process.Triggers.Process Started.Triggering Process.Start Time</DisplayPath>
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ProcessInstance</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>StartTime</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectType>EventInstance</ObjectType>
                  </VariableReference>
                </References>
              </Date>
              <SubtractDate>
                <FormattedCode>{0}</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <DisplayPath>Workflow.Select from Table.Result Table.First Row.Last Triggered</DisplayPath>
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResultTable</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>FirstRow</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>Last Triggered</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>71d6d20b-bcb7-4bd9-8844-bdd5c1dada03</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </References>
              </SubtractDate>
            </Configuration>
          </ActivityNode>
          <ActivityNode xsi:type="ConditionBranchNode">
            <Id>32af2d80-3ee6-4b69-8eb9-c5af29c007a0</Id>
            <DisplayName>Time Difference &gt;= 2 * Schedule Interval?</DisplayName>
            <Children>
              <ActivityNode xsi:type="StartProcessNode">
                <Id>ada0b372-f98a-40ad-81cf-cb0ae3432d5b</Id>
                <DisplayName>Create Notification</DisplayName>
                <Children>
                  <ActivityNode xsi:type="FailedBranchPlaceholderNode">
                    <Id>9a93fa77-c790-4cbc-8684-783f0678e904</Id>
                    <ProcessNodeId>ada0b372-f98a-40ad-81cf-cb0ae3432d5b</ProcessNodeId>
                    <CompletedId>b250638a-f688-459e-b095-9304c58c4e62</CompletedId>
                  </ActivityNode>
                </Children>
                <ProcessId>7c2129b2-67f8-4742-8795-1775dcb598b9</ProcessId>
                <InputVariableTable>
                  <VariableAssignmentsAsArray>
                    <InputVariableAssignment>
                      <InputVariableId>9007e5b3-2036-4763-ae14-539508ad445c</InputVariableId>
                      <VariableValue xsi:type="SubstitutableString">
                        <FormattedCode>Prevous Execution Time:  {0}.  
Current Execution Time: {1}
Execution Schedule Interval: {2} minutes

It's been {3} minutes since the previous execution.</FormattedCode>
                        <References>
                          <VariableReference xsi:type="PropertyReference">
                            <DisplayPath>Workflow.Select from Table.Result Table.First Row.Last Triggered</DisplayPath>
                            <LinkChain>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>ResultTable</PropertyName>
                              </Link>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>FirstRow</PropertyName>
                              </Link>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>Last Triggered</PropertyName>
                              </Link>
                            </LinkChain>
                            <ObjectId>71d6d20b-bcb7-4bd9-8844-bdd5c1dada03</ObjectId>
                            <ObjectType>ActivityInstance</ObjectType>
                          </VariableReference>
                          <VariableReference xsi:type="PropertyReference">
                            <DisplayPath>Process.Triggers.Process Started.Triggering Process.Start Time</DisplayPath>
                            <LinkChain>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>ProcessInstance</PropertyName>
                              </Link>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>StartTime</PropertyName>
                              </Link>
                            </LinkChain>
                            <ObjectType>EventInstance</ObjectType>
                          </VariableReference>
                          <VariableReference xsi:type="PropertyReference">
                            <DisplayPath>Workflow.Select from Table.Result Table.First Row.Schedule Interval (Minutes)</DisplayPath>
                            <LinkChain>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>ResultTable</PropertyName>
                              </Link>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>FirstRow</PropertyName>
                              </Link>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>Schedule Interval (Minutes)</PropertyName>
                              </Link>
                            </LinkChain>
                            <ObjectId>71d6d20b-bcb7-4bd9-8844-bdd5c1dada03</ObjectId>
                            <ObjectType>ActivityInstance</ObjectType>
                          </VariableReference>
                          <VariableReference xsi:type="PropertyReference">
                            <DisplayPath>Workflow.Calculate Date Time Difference.Total Minutes</DisplayPath>
                            <LinkChain>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>TotalMinutes</PropertyName>
                              </Link>
                            </LinkChain>
                            <ObjectId>f05b7175-b141-41b3-8944-a1e803494a48</ObjectId>
                            <ObjectType>ActivityInstance</ObjectType>
                          </VariableReference>
                        </References>
                      </VariableValue>
                    </InputVariableAssignment>
                    <InputVariableAssignment>
                      <InputVariableId>0d1b97e4-acdb-4a1a-8797-750f6a6eb409</InputVariableId>
                      <VariableValue xsi:type="SubstitutableString">
                        <FormattedCode>{0}</FormattedCode>
                        <References>
                          <VariableReference xsi:type="PropertyReference">
                            <DisplayPath>Process.Triggers.Process Started.Triggering Process.Name</DisplayPath>
                            <LinkChain>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>ProcessInstance</PropertyName>
                              </Link>
                              <Link xsi:type="PropertyNameLink">
                                <PropertyName>ResolvedProcessName</PropertyName>
                              </Link>
                            </LinkChain>
                            <ObjectType>EventInstance</ObjectType>
                          </VariableReference>
                        </References>
                      </VariableValue>
                    </InputVariableAssignment>
                  </VariableAssignmentsAsArray>
                </InputVariableTable>
                <Asynchronous>false</Asynchronous>
                <InheritTarget>true</InheritTarget>
                <TargetLoadBalancer xsi:type="ProcessTargetLoadBalancer" />
                <InheritPriorityClass>true</InheritPriorityClass>
                <RuntimeUserId>
                  <HardcodedValue>00000000-0000-0000-0000-000000000000</HardcodedValue>
                </RuntimeUserId>
                <KnowledgeBaseId>00000000-0000-0000-0000-000000000000</KnowledgeBaseId>
                <StartPointId>
                  <HardcodedValue>00000000-0000-0000-0000-000000000000</HardcodedValue>
                </StartPointId>
                <StartPointName>
                  <FormattedCode />
                </StartPointName>
                <RuntimeUserObject xsi:type="SubstitutableObjectReference">
                  <FormattedCode />
                  <HardcodedValue>
                    <Id>00000000-0000-0000-0000-000000000000</Id>
                    <ObjectType>RuntimeUser</ObjectType>
                  </HardcodedValue>
                </RuntimeUserObject>
              </ActivityNode>
            </Children>
            <Condition>
              <Id>f9c0df33-737b-4937-9024-5c142e1ce1c2</Id>
              <Conditions>
                <ConditionDefinition xsi:type="VariableConditionDefinition">
                  <Id>56f8fd8b-baf5-4b9d-aaf8-cc3efdf2db39</Id>
                  <Expression xsi:type="SubstitutableBoolean">
                    <HardcodedValue>false</HardcodedValue>
                  </Expression>
                  <Comparison>Equals</Comparison>
                  <VariableReference xsi:type="PropertyReference">
                    <DisplayPath>Workflow.Calculate Date Time Difference.Instance Failed</DisplayPath>
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>InstanceFailed</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>f05b7175-b141-41b3-8944-a1e803494a48</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </ConditionDefinition>
                <ConditionDefinition xsi:type="VariableConditionDefinition">
                  <Id>febd43ff-632c-4d00-9a82-9dfaabbdc0d9</Id>
                  <Expression xsi:type="SubstitutableNumber">
                    <FormattedCode>{0} * 2</FormattedCode>
                    <References>
                      <VariableReference xsi:type="PropertyReference">
                        <DisplayPath>Workflow.Select from Table.Result Table.First Row.Schedule Interval (Minutes)</DisplayPath>
                        <LinkChain>
                          <Link xsi:type="PropertyNameLink">
                            <PropertyName>ResultTable</PropertyName>
                          </Link>
                          <Link xsi:type="PropertyNameLink">
                            <PropertyName>FirstRow</PropertyName>
                          </Link>
                          <Link xsi:type="PropertyNameLink">
                            <PropertyName>Schedule Interval (Minutes)</PropertyName>
                          </Link>
                        </LinkChain>
                        <ObjectId>71d6d20b-bcb7-4bd9-8844-bdd5c1dada03</ObjectId>
                        <ObjectType>ActivityInstance</ObjectType>
                      </VariableReference>
                    </References>
                  </Expression>
                  <Comparison>GreaterThanOrEquals</Comparison>
                  <VariableReference xsi:type="PropertyReference">
                    <DisplayPath>Workflow.Calculate Date Time Difference.Total Minutes</DisplayPath>
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>TotalMinutes</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectId>f05b7175-b141-41b3-8944-a1e803494a48</ObjectId>
                    <ObjectType>ActivityInstance</ObjectType>
                  </VariableReference>
                </ConditionDefinition>
              </Conditions>
            </Condition>
          </ActivityNode>
          <ActivityNode xsi:type="ExecuteActivityNode">
            <Id>33cf9eac-981d-4f06-9cbd-cdd805af92e2</Id>
            <DisplayName>Update Row in Table</DisplayName>
            <Children>
              <ActivityNode xsi:type="FailedBranchPlaceholderNode">
                <Id>cd173f9c-bc4a-4e6f-b0bd-e54ba7dcaaa0</Id>
                <ActivityNodeId>33cf9eac-981d-4f06-9cbd-cdd805af92e2</ActivityNodeId>
                <CompletedId>e15808aa-3fc5-4aa4-85a0-dc388df90cbc</CompletedId>
              </ActivityNode>
            </Children>
            <Configuration xsi:type="BuiltinUpdateTableRowActivityConfiguration" xml:space="preserve">
              <Id>33cf9eac-981d-4f06-9cbd-cdd805af92e2</Id>
              <DisplayName>Update Row in Table</DisplayName>
              <TargetLoadBalancer xsi:type="SingleTargetLoadBalancer">
                <SingleTargetId>
                  <HardcodedValue>bd4b3145-4e20-42bb-ba8f-34c013ca86cc</HardcodedValue>
                </SingleTargetId>
              </TargetLoadBalancer>
              <InheritTarget>false</InheritTarget>
              <ContainingProcessId>cf17b317-9d18-40c1-8ef0-37164b7ea3e9</ContainingProcessId>
              <RowSelectionMode>WhereClause</RowSelectionMode>
              <WhereClause>
                <FormattedCode>[Process Name] = '{0}'</FormattedCode>
                <References>
                  <VariableReference xsi:type="PropertyReference">
                    <DisplayPath>Process.Triggers.Process Started.Triggering Process.Name</DisplayPath>
                    <LinkChain>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ProcessInstance</PropertyName>
                      </Link>
                      <Link xsi:type="PropertyNameLink">
                        <PropertyName>ResolvedProcessName</PropertyName>
                      </Link>
                    </LinkChain>
                    <ObjectType>EventInstance</ObjectType>
                  </VariableReference>
                </References>
              </WhereClause>
              <TableVariable>
                <DisplayPath>Global Variables.Scheduled Process Monitor Information</DisplayPath>
                <LinkChain />
                <ObjectId>c0d7a062-dd6b-480e-b095-c06467881883</ObjectId>
                <ObjectType>GlobalVariable</ObjectType>
              </TableVariable>
              <Values>
                <BuiltinDataCellValue>
                  <ColumnName>Last Triggered</ColumnName>
                  <Value xsi:type="SubstitutableDate">
                    <FormattedCode>{0}</FormattedCode>
                    <References>
                      <VariableReference xsi:type="PropertyReference">
                        <DisplayPath>Process.Triggers.Process Started.Triggering Process.Start Time</DisplayPath>
                        <LinkChain>
                          <Link xsi:type="PropertyNameLink">
                            <PropertyName>ProcessInstance</PropertyName>
                          </Link>
                          <Link xsi:type="PropertyNameLink">
                            <PropertyName>StartTime</PropertyName>
                          </Link>
                        </LinkChain>
                        <ObjectType>EventInstance</ObjectType>
                      </VariableReference>
                    </References>
                  </Value>
                </BuiltinDataCellValue>
              </Values>
            </Configuration>
          </ActivityNode>
        </Children>
        <LockSource xsi:type="SubstitutableObjectReference">
          <FormattedCode />
          <HardcodedValue>
            <Id>5db50eb8-bbd5-4136-ad39-c7e775832f8d</Id>
            <ObjectType>SynchronizedResource</ObjectType>
          </HardcodedValue>
        </LockSource>
        <Priority>High</Priority>
        <TimeoutOccurred>false</TimeoutOccurred>
      </ActivityNode>
    </Children>
  </FirstActivity>
  <ProcessId>cf17b317-9d18-40c1-8ef0-37164b7ea3e9</ProcessId>
</WorkflowConfiguration>